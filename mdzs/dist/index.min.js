"use strict";function _toConsumableArray(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}return Array.from(i)}function getViewPortWidth(){return document.documentElement.clientWidth||document.body.clientWidth}function getViewPortHeight(){return document.documentElement.clientHeight||document.body.clientHeight}function getScrollLeft(){return document.documentElement.scrollLeft||document.body.scrollLeft}function getScrollTop(){return document.documentElement.scrollTop||document.body.scrollTop}Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(i){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),t=e.length>>>0,s=arguments[1]>>0,n=s<0?Math.max(t+s,0):Math.min(s,t),o=arguments[2],r=void 0===o?t:o>>0,a=r<0?Math.max(t+r,0):Math.min(r,t);n<a;)e[n]=i,n++;return e}}),function(){function n(i){var e=i.content,t=void 0===e?"":e,s=i.mask,n=void 0!==s&&s,o=i.fixed,r=void 0!==o&&o,a=i.onshow,c=void 0===a?function(){}:a,d=$('\n            <div class="ui-dialog">\n                <div class="ui-dialog-close">x</div>\n                '+(t||"")+"\n            </div>\n        ");return r?d.css({top:"50%",position:"fixed"}):d.css({top:getScrollTop()+getViewPortHeight()/2}),{show:function(){n&&$("body").append('<div class="mask"></div>'),$("body").append(d),c(),$(".ui-dialog-close").off("click").on("click",function(){$(".mask").hide().remove(),d.hide().remove()})}}}({init:function(){this.initMasonry(),this.initRightFixedPosition(),this.initGoToTop(),this.testSpeed(),this.initVideo(),this.initScrollBar(),this.initMoveByMouse(),this.initRightFixedNav()},initMasonry:function(){var i=Array(41).fill(0).map(function(i,e){return"./img/masonry/horizontal/h"+(e+1)+".jpg"}),e=Array(9).fill(0).map(function(i,e){return"./img/masonry/vertical/v"+(e+1)+".jpg"}),s=[].concat(_toConsumableArray(i),_toConsumableArray(e)),t=s.map(function(i,e){var t=void 0;return-1!==i.indexOf("horizontal")?t="horizontal":-1!==i.indexOf("vertical")&&(t="vertical"),'\n                    <div class="js-masonry-item item" url="'+i+'">\n                        <div class="item__content '+t+'" style="background:url('+i+') no-repeat top center;background-size:cover">\n                            <div class="item__content-mask"></div>\n                            <div class="zoom-in"></div>\n                        </div>\n                    </div>\n                '}).join("");$(".js-masonry").html(t),$(".js-masonry-item").off("click").on("click",function(){var i=s.map(function(i,e){return'\n                <div class="js-swiper-item swiper-slide"><img class="js-swiper-img" src="'+i+'"></div>                \n              '}).join(""),e=$(this).attr("url"),t=s.indexOf(e);n({mask:!0,content:'    \n                <div class="swiper-container">\n                    <div class="swiper-wrapper">\n                        '+i+'\n                    </div>\n                    <div class="swiper-button-prev"></div>\n                    <div class="swiper-button-next"></div>\n                    <div class="swiper-pagination"></div>\n                </div>\n            ',onshow:function(){new Swiper(".swiper-container",{autoplay:!1,autoHeight:!0,initialSlide:t,direction:"horizontal",loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"fraction"}})}}).show()})},initRightFixedPosition:function(){var i=$(".js-head-wrapper")[0].offsetWidth,e=(window.screen.width-i)/2-$(".js-right-fixed")[0].offsetWidth-60;e=e<0?0:e,$(".js-right-fixed").css({right:e})},initScrollBar:function(){var i=document.querySelector(".js-img-box"),e=i.scrollHeight,t=i.offsetHeight,s=document.querySelector(".js-scroll-wrapper").offsetHeight,n=document.querySelector(".js-scroll-bar").offsetHeight;i.addEventListener("scroll",function(){$(".js-scroll-bar").css({top:this.scrollTop/(e-t)*(s-n)})})},initGoToTop:function(){$(window).scroll(function(){720<$(window).scrollTop()?$(".js-to-top").addClass("show"):$(".js-to-top").removeClass("show")})},initRightFixedNav:function(){$(window).scroll(function(){var i=$(window).scrollTop();i<=360?($(".js-fixed-video").removeClass("active"),$(".js-fixed-masonry").removeClass("active"),$(".js-fixed-introduction").removeClass("active")):360<i&&i<=720?($(".js-fixed-video").addClass("active"),$(".js-fixed-masonry").removeClass("active"),$(".js-fixed-introduction").removeClass("active")):720<i&&i<=1600?($(".js-fixed-masonry").addClass("active"),$(".js-fixed-video").removeClass("active"),$(".js-fixed-introduction").removeClass("active")):1600<i&&($(".js-fixed-introduction").addClass("active"),$(".js-fixed-masonry").removeClass("active"),$(".js-fixed-video").removeClass("active"))})},initVideo:function(){var i=this;$(".js-video-btn").off("click").on("click",function(){n({mask:!0,onshow:function(){var e=$(".js-video")[0];$(".js-switch-sharpness").off("click").on("click",function(){$(".js-sharpness-list").toggleClass("hide")}),$(".js-sharpness-item").off("click").on("click",function(){var i=e.currentTime;$(".js-video").attr("src",$(this).attr("url")).attr("autoplay","true"),e.currentTime=i,$(".js-sharpness-list").addClass("hide")}),$(".js-video-wrapper").hover(function(){$(".switch-video-wrapper").show()},function(){$(".switch-video-wrapper").hide()}),0===i.netSpeed||1===i.netSpeed?$(".js-video").attr("src","./media/480p.mp4"):2===i.netSpeed||3===i.netSpeed?$(".js-video").attr("src","./media/720p.mp4"):4===i.netSpeed&&$(".js-video").attr("src","./media/1080p.mp4")},content:'\n                <div class="js-video-wrapper video-wrapper">\n                    <video class="js-video content-2-video" src="./media/720p.mp4" muted controls autoplay></video>\n                    <div class="js-switch-video-wrapper switch-video-wrapper">\n                        <span class="js-switch-sharpness">切换清晰度</span>\n                        <ul class="js-sharpness-list video-sharpness-list hide">\n                            <li class="js-sharpness-item sharpness-item" sharpness="480P" url="./media/480p.mp4">480P</li>\n                            <li class="js-sharpness-item sharpness-item" sharpness="720P" url="./media/720p.mp4">720P</li>\n                            <li class="js-sharpness-item sharpness-item" sharpness="1080P" url="./media/1080p.mp4">1080P</li>                            \n                        </ul>\n                    </div>\n                </div>\n                      '}).show()})},initMoveByMouse:function(){$(".js-content-1").mousemove(function(i){var e=$(this)[0].offsetWidth,t=$(this)[0].offsetHeight,s=i.offsetX,n=i.offsetY,o=$(".js-main-fire")[0].offsetWidth,r=$(".js-main-fire")[0].offsetHeight,a=$(".js-main-title")[0].offsetWidth,c=$(".js-main-title")[0].offsetHeight;$(".js-main-fire").css({transform:"translate("+(-o/2-50*(s-e/2)/e)+"px, "+(-r/2-50*(n-t/2)/t)+"px)"}),$(".js-main-title").css({transform:"translate("+(-a/2+100*(s-e/2)/e)+"px, "+(-c/2+100*(n-t/2)/t)+"px)"})}).mouseleave(function(){$(".js-main-fire").css({transform:"translate(-50%, -50%)"}),$(".js-main-title").css({transform:"translate(-50%, -50%)"})})},netSpeed:0,testSpeed:function(){var s=this,n=(new Date).getTime();new Image("https://www.xxx.com").onerror=function(){var i=(new Date).getTime(),e=Math.round(35400)/(i-n),t=0<e&&e<=50?0:50<e&&e<=100?1:100<=e&&e<200?2:200<=e&&e<300?3:4;s.netSpeed=t}}}).init()}();